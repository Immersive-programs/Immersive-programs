<!DOCTYPE html>
<html lang="ru">
    <head>
        <title>Range Randoms</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/index.css">
    </head>
    <body>
        <div>
            <div class='backimage'></div>
            <div id='ownernavshadow'>
               <svg class='navshadow'></svg>
            </div>
            <div id ="ownertt"s>
                <svg class = 'tt'>
                    <lineargradient id = 'lgr1' gradientTransform="rotate(-11)" >
                        <stop offset="0%" stop-color="rgba(86,52,138,0.76)" />
                        <stop offset="40%" stop-color="rgba(163,100,166,0.76)">
                            <animate
                            dur="5s" 
                            attributeName="offset"
                            values="40%;60%;40%"
                            repeatCount="indefinite"
                            ></animate>
                            <animate
                            dur="5s" 
                            attributeName="stop-color"
                            values="rgba(163,100,166,0.76);rgba(163,100,166,1);rgba(163,100,166,0.76)"
                            repeatCount="indefinite"
                            ></animate>
                        </stop>
                        <stop offset="100%" stop-color=rgba(144,40,79,0.76) />

                    </lineargradient>
                    <polyline style='stroke-width:2; fill: url(#lgr1)'>
                        <animate
                        attributeName="points"
                        dur="1.5s"
                        values="5 5,0 10, 5 15, 2 20, 5 25, 0 30, 5 35, 2 40, 5 45, 0 50, 5 55, 2 60, 5 65, 0 70, 5 75, 2 80, 5 85, 0 90, 5 95, 2 100, 5 105, 0 110, 5 115, 10 120, 15 115, 20, 118, 25 115, 30 120, 35 115, 40 118, 45 115, 50 120, 55 115, 60 118, 65 115, 70 120, 75 115, 80 118, 85 115, 90 120, 95 115, 100 118, 105 115, 110 120, 115 115, 120 118, 125 115, 130 120, 135 115, 140 118, 145 115, 150 120, 155 115, 160 118, 165 115, 170 120, 175 115, 180 118, 185 115, 190 120, 195 115, 200 118, 205 115, 210 120, 215 115, 220 118, 225 115, 230 120, 235 115, 240 118, 245 115, 250 120, 255 115, 260 118, 265 115, 270 120, 275 115, 280 118, 285 115, 290 120, 295 115, 300 118, 305 115, 310 120, 315 115, 320 118, 325 115, 330 120, 335 115, 340 118, 345 115, 350 120, 355 115, 360 118, 365 115, 370 120, 375 115, 380 110, 375 105, 378 100, 375 95, 380 90, 375 85, 378 80, 375 75, 380 70, 375 65, 378 60, 375 55, 380 50, 375 45, 378, 40, 375 35, 380 30, 375 25, 378 20, 375 15, 380, 10;
                                5 5,0 12, 5 15, 2 18, 5 25, 0 32, 5 35, 2 38, 5 45, 0 52, 5 55, 2 58, 5 65, 0 72, 5 75, 2 78, 5 85, 0 92, 5 95, 2 98, 5 105, 0 112, 5 115, 8 120, 15 115, 22, 118, 25 115, 28 120, 35 115, 42 118, 45 115, 48 120, 55 115, 62 118, 65 115, 68 120, 75 115, 82 118, 85 115, 88 120, 95 115, 102 118, 105 115, 108 120, 115 115, 122 118, 125 115, 128 120, 135 115, 142 118, 145 115, 148 120, 155 115, 162 118, 165 115, 168 120, 175 115, 182 118, 185 115, 188 120, 195 115, 202 118, 205 115, 208 120, 215 115, 222 118, 225 115, 228 120, 235 115, 242 118, 245 115, 248 120, 255 115, 262 118, 265 115, 268 120, 275 115, 282 118, 285 115, 288 120, 295 115, 302 118, 305 115, 308 120, 315 115, 322 118, 325 115, 328 120, 335 115, 342 118, 345 115, 348 120, 355 115, 362 118, 365 115, 368 120, 375 115, 380 108, 375 105, 378 102, 375 95, 380 88, 375 85, 378 78, 375 75, 380 72, 375 65, 378 58, 375 55, 380 52, 375 45, 378, 38, 375 35, 380 32, 375 25, 378 18, 375 15, 380, 12;
                                5 5,0 10, 5 15, 2 20, 5 25, 0 30, 5 35, 2 40, 5 45, 0 50, 5 55, 2 60, 5 65, 0 70, 5 75, 2 80, 5 85, 0 90, 5 95, 2 100, 5 105, 0 110, 5 115, 10 120, 15 115, 20, 118, 25 115, 30 120, 35 115, 40 118, 45 115, 50 120, 55 115, 60 118, 65 115, 70 120, 75 115, 80 118, 85 115, 90 120, 95 115, 100 118, 105 115, 110 120, 115 115, 120 118, 125 115, 130 120, 135 115, 140 118, 145 115, 150 120, 155 115, 160 118, 165 115, 170 120, 175 115, 180 118, 185 115, 190 120, 195 115, 200 118, 205 115, 210 120, 215 115, 220 118, 225 115, 230 120, 235 115, 240 118, 245 115, 250 120, 255 115, 260 118, 265 115, 270 120, 275 115, 280 118, 285 115, 290 120, 295 115, 300 118, 305 115, 310 120, 315 115, 320 118, 325 115, 330 120, 335 115, 340 118, 345 115, 350 120, 355 115, 360 118, 365 115, 370 120, 375 115, 380 110, 375 105, 378 100, 375 95, 380 90, 375 85, 378 80, 375 75, 380 70, 375 65, 378 60, 375 55, 380 50, 375 45, 378, 40, 375 35, 380 30, 375 25, 378 20, 375 15, 380, 10;
                                5 5,0 8, 5 15, 2 22, 5 25, 0 28, 5 35, 2 42, 5 45, 0 48, 5 55, 2 62, 5 65, 0 68, 5 75, 2 82, 5 85, 0 88, 5 95, 2 102, 5 105, 0 108, 5 115, 12 120, 15 115, 18, 118, 25 115, 32 120, 35 115, 38 118, 45 115, 52 120, 55 115, 58 118, 65 115, 72 120, 75 115, 78 118, 85 115, 92 120, 95 115, 98 118, 105 115, 112 120, 115 115, 118 118, 125 115, 132 120, 135 115, 138 118, 145 115, 152 120, 155 115, 158 118, 165 115, 172 120, 175 115, 178 118, 185 115, 192 120, 195 115, 198 118, 205 115, 212 120, 215 115, 218 118, 225 115, 232 120, 235 115, 238 118, 245 115, 252 120, 255 115, 258 118, 265 115, 272 120, 275 115, 278 118, 285 115, 292 120, 295 115, 298 118, 305 115, 312 120, 315 115, 318 118, 325 115, 332 120, 335 115, 338 118, 345 115, 352 120, 355 115, 358 118, 365 115, 372 120, 375 115, 380 112, 375 105, 378 98, 375 95, 380 92, 375 85, 378 82, 375 75, 380 68, 375 65, 378 62, 375 55, 380 48, 375 45, 378, 42, 375 35, 380 28, 375 25, 378 22, 375 15, 380, 8;
                                5 5,0 10, 5 15, 2 20, 5 25, 0 30, 5 35, 2 40, 5 45, 0 50, 5 55, 2 60, 5 65, 0 70, 5 75, 2 80, 5 85, 0 90, 5 95, 2 100, 5 105, 0 110, 5 115, 10 120, 15 115, 20, 118, 25 115, 30 120, 35 115, 40 118, 45 115, 50 120, 55 115, 60 118, 65 115, 70 120, 75 115, 80 118, 85 115, 90 120, 95 115, 100 118, 105 115, 110 120, 115 115, 120 118, 125 115, 130 120, 135 115, 140 118, 145 115, 150 120, 155 115, 160 118, 165 115, 170 120, 175 115, 180 118, 185 115, 190 120, 195 115, 200 118, 205 115, 210 120, 215 115, 220 118, 225 115, 230 120, 235 115, 240 118, 245 115, 250 120, 255 115, 260 118, 265 115, 270 120, 275 115, 280 118, 285 115, 290 120, 295 115, 300 118, 305 115, 310 120, 315 115, 320 118, 325 115, 330 120, 335 115, 340 118, 345 115, 350 120, 355 115, 360 118, 365 115, 370 120, 375 115, 380 110, 375 105, 378 100, 375 95, 380 90, 375 85, 378 80, 375 75, 380 70, 375 65, 378 60, 375 55, 380 50, 375 45, 378, 40, 375 35, 380 30, 375 25, 378 20, 375 15, 380, 10" 

                        repeatCount="indefinite"
                        ></animate>
                        <animate
                            dur="10s" 
                            attributeName="stroke"
                            values="white;orange;cyan;blueviolet;white"
                            repeatCount="indefinite"
                        ></animate>
                    </polyline>
                </svg>
            </div>
           
            <div class='rc1'></div>  
            <div class='rc2'></div>
           
            <nav class = nav>
                <h1>Range Randoms</h1>
                <ul>
                    <li id='link2'><a href="https://github.com/Immersive-programs/Range-Randoms">Github</a></li>
                    <li id='thislink1'><a href="">Числа</a></li>
                    <li id='link1'><a href="characters.html">Буквы</a></li>
                    <li id='link3'><a href="passwords.html">Пароли</a></li>
                </ul>
            </nav>
            <article>
                <h2 id = 'cx'>Случайное число:</h2>
                <button id='copygen' onclick = "copygen()"></button>
                <h3 id = 'ci'></h3>
                <button id = 'button' onclick = "clicked()" > Генерация!</button>
                <ul class='random_options'>
                    <li><label>Настройки:</label></li>
                    <li>
                        <input type="range" id='range' oninput="rangeedit()" min="1" max="100" step="1" value="1">
                        <div class='countdiv'>
                            <input id='countr' onkeyup="this.value = this.value.replace(/[^\d]/g,'')" oninput="editrange()"/>
                            <label id='countrl'> число будет создано</label>
                            <label class="tooltip">?
                                <span class="tooltiptext">Значение определяет количество создаваемых чисел</span>
                            </label>
                        </div>
                    </li>
                    <li id='rangel'>
                        <label>Диапазон от</label>
                        <input id='startrange' onkeyup="this.value = this.value.replace(/[^\d]/g,'')"/>
                        <label>до</label>
                        <input id='stoprange' onkeyup="this.value = this.value.replace(/[^\d]/g,'')"/>
                        <label class="tooltip">?
                                <span class="tooltiptext">Значение определяет минимально и максимально возможные числа при создании</span>
                        </label>
                    </li>
                    <li>
                        <input type="checkbox" id='checkspliter'>
                        <label>Разделитель:</label>
                        <input id='spliter'/>
                        <label class="tooltip">?
                            <span class="tooltiptext">Значение заменяет отступы между числами (пример:' ' ',' ';' 'abc')</span>
                    </li>
                    <li>
                        <input type="checkbox" id='checkfirstadd'>
                        <label>Добавить в начало:</label>
                        <input id='firstadd'/>
                        <label class="tooltip">?
                            <span class="tooltiptext"></span>
                    </li>
                    <li>
                        <input type="checkbox" id='checklaststadd'>
                        <label>Добавить в конец:</label>
                        <input id='laststadd'/>
                        <label class="tooltip">?
                            <span class="tooltiptext"></span>
                    </li>
                    <li>
                        <input type="checkbox" id='norepeat'>
                        <label>Исключить повторы</label>
                        <label class="tooltip">?
                                <span class="tooltiptext">При создании чисел будут исключаться уже использованные</span>
                    </li>
                    <li id='doublel' >
                        <input type="checkbox" id='doublemode'/>
                        <label>Числа с плавающей точкой до </label>
                        <input id='doublecount' maxlength='2' onkeyup="this.minusper = this.value.replace(/[^\d]/g,'')"/>
                        <label>долей</label>
                        <label class="tooltip">?
                            <span class="tooltiptext">Значение определяет количество знаков после целой части</span>
                    </li>
                    
                    <li id='minusperl1' >
                        <input type="checkbox" id='checkminusper' name="double"/>
                        <label>Шанс содать отрицательное число</label>
                        <input id='minusper' disabled='true'/>
                        <label>%</label>
                    </li>
                    <li id='minusperl2' >
                        <input type="range" id='rngm' oninput="document.getElementById('minusper').value = this.value" min="0" max="100" step="1" value="50">
                        <label class="tooltip">?
                            <span class="tooltiptext">Значение определяет шанс создания отрицательного числа</span>
                    </li>
                    
                    <li>
                        <input type="checkbox" onclick="checklistclick()" id="islist" name="lists" value="yes">
                        <label for="list">Режим списка</label>
                        <label class="tooltip">?
                            <span class="tooltiptext">Заменяет параметры создания на пользовательский список чисел</span>
                    </li>
                    <li style="margin-right: 10px"><textarea id="list"/></textarea></li>
                </ul>
            </article>
        </div>
    </body>
    <script type="text/javascript">
        var r = document.getElementById('range');
        var c = document.getElementById('countr');
        var d = document.getElementById('doublecount');
        var str = document.getElementById('startrange');
        var stp = document.getElementById('stoprange');
        var il = document.getElementById('islist');
        var dm = document.getElementById('doublemode')
        var l = document.getElementById('list');
        var ci = document.getElementById('ci');
        var sp = document.getElementById('spliter');
        var csp = document.getElementById('checkspliter');
        var ms = document.getElementById('minusper');
        var rngm = document.getElementById('rngm');
        var cms = document.getElementById('checkminusper');
        var nr = document.getElementById('norepeat');
        var cfa = document.getElementById('checkfirstadd');
        var cla = document.getElementById('checklaststadd');
        var fa = document.getElementById('firstadd');
        var la = document.getElementById('laststadd');
        
        c.value = 1;
        r.value = 1;
        d.value = 3;
        str.value = 0;
        stp.value = 100;
        il.checked = false;
        dm.checked = false;
        l.value = '';
        l.hidden = true;
        ci.innerHTML = generatenuber(0,100,0);
        sp.value = '';
        csp.checked = false;
        ms.value = '50';
        rngm.value = '50';
        cms.checked = false;
        nr.checked = false;
        cfa.checked = false;
        cla.checked = false;
        fa.value = '';
        la.value = '';
        
        var rc1 = document.getElementsByClassName('rc1')[0];
        var rc2 = document.getElementsByClassName('rc2')[0];
        
        for (j = 0; 30 > j; j++)
        {
            var p = document.createElement('p');
            p.innerText = Math.floor(Math.random()*10);
            s = Math.floor((Math.random()*(40-20))+20)+'px';
            m = Math.floor((Math.random()*(100-50))+50)+'px';
            t = Math.floor(Math.random()*20)+'deg';
            c = '';
            a = '';
            
            if (Math.random() < 0.5){
                t = '-'+t;
            }
            
            switch(Math.floor(Math.random()*3))
            {
                case 0: 
                    a = 'left';
                    break;
                case 1: 
                    a = 'center';
                    break;
                case 2: 
                    a = 'right';
                    break;
            }
            
            switch(Math.floor(Math.random()*5))
            {
                case 0: 
                    c = 'white';
                    break;
                case 1: 
                    c = 'gray';
                    break;
                case 2: 
                    c = '#9999ff';
                    break;
                case 3: 
                    c = 'purple';
                    break;
                case 4: 
                    c = 'cyan';
                    break;
                case 5: 
                    c = 'greenyellow';
                    break;
            }
            p.style.cssText = 'font-size:'+s+';text-align:'+a+';height: '+m+'; transform: rotate('+t+'); color:'+c;
           
            if (j < 15)
            {
                rc1.appendChild(p);
            }
            else
            {
                rc2.appendChild(p);
            }
            
        }
        
        function checklistclick()
        {
            var rl = document.getElementById('rangel');
            var dl = document.getElementById('doublel');
            var msl1 = document.getElementById('minusperl1');
            var msl2 = document.getElementById('minusperl2');
            if (il.checked)
            {
                l.hidden = false;
                rl.hidden = true;
                dl.hidden = true;
                msl1.hidden = true;
                msl2.hidden = true;
            }
            else
            {
                l.hidden = true;
                rl.hidden = false;
                dl.hidden = false;
                msl1.hidden = false;
                msl2.hidden = false;
            }  
        }
        
        function rangeedit()
        {
            var r = document.getElementById('range');
            var c = document.getElementById('countr');
            c.value = r.value;
            
            if (c.value > 1)
                document.getElementById('countrl').innerHTML = " чисел будет создано";
            else
                document.getElementById('countrl').innerHTML = " число будет создано";
        }
        
        function editrange()
        {
            var r = document.getElementById('range');
            var c = document.getElementById('countr');
            r.value = c.value.replace(/[^\d]/g,'');
            
            if (c.value > 1)
                document.getElementById('countrl').innerHTML = " чисел будет создано";
            else
                document.getElementById('countrl').innerHTML = " число будет создано";
        }
        
        function clicked()
        {
            var c = document.getElementById('countr');
            var str = document.getElementById('startrange');
            var stp = document.getElementById('stoprange');
            var il = document.getElementById('islist');
            var d = document.getElementById('doublecount');
            var dm = document.getElementById('doublemode')
            var l = document.getElementById('list');
            var sp = document.getElementById('spliter');
            var csp = document.getElementById('checkspliter');
            var ms = document.getElementById('minusper');
            var cms = document.getElementById('checkminusper');
            var nr = document.getElementById('norepeat');
            var cfa = document.getElementById('checkfirstadd');
            var cla = document.getElementById('checklaststadd');
            var fa = document.getElementById('firstadd');
            var la = document.getElementById('laststadd');

            ci.innerHTML = "";
            
            if (cfa.checked)
                ci.innerHTML += fa.value;
                
            if (c.value > 1)
                 cx.innerHTML = "Случайные числа:";
            else
                cx.innerHTML = "Случайное число:";

             if (il.checked)
             {
                 var buff = [];
                 let text = l.value;
                 text = text.replace(/[^\d]/g,' ');
                 var arr = text.split(' ');
                 var spliter = ' ';
                 if (csp.checked && sp.value != '')
                       spliter = sp.value;
                 for(k = 0;  c.value > k; k++) 
                 {
                      var g = arr[Math.floor(Math.random() * arr.length)];
                      if (buff.filter(co => co == g).length == 0 || !nr.checked)
                      {
                          buff.push(g);
                          ci.innerHTML += g;
                              if (c.value > k+1)
                                  ci.innerHTML += spliter;
                      }

                 }
            }
            else 
            {      
                var buff = [];
                var maxdoublevalue = 0
                var stopvalue = stp.value;
                var startvalue = str.value;
                var spliter = ' ';
                var count = c.value;
                if (csp.checked && sp.value != '')
                     spliter = sp.value;

                var maxnonrep = stp.value-str.value;
                if (nr.checked)
                {
                    if (cms.checked && ms.value > 1 && ms.value < 100)
                    {
                        maxnonrep = 2 * maxnonrep;
                    }

                    if (dm.checked)
                    {
                        maxnonrep = (maxnonrep*10**d.value);
                    }

                    maxnonrep = 1 + maxnonrep;

                    if (count > maxnonrep) 
                    {
                        cx.innerHTML = maxnonrep + " возможных чисел:";
                        count = maxnonrep
                    }
                }

                for(k = 0;  count > k; k++) {
                    if (dm.checked) 
                    {
                         maxdoublevalue = d.value;
                    }
                    if (nr.checked)
                    {
                        var gen = generatenuber(startvalue,stopvalue,maxdoublevalue);

                        if (cms.checked)
                        {
                            if (Math.random() < ms.value/100)
                             gen = -1 * gen;
                        }

                        if (buff.filter(co => co == gen).length > 0)
                        {
                            k--;
                        }
                        else
                        {
                            buff.push(gen);
                            ci.innerHTML += gen;
                            if (count > k+1)
                                ci.innerHTML += spliter;
                        }
                    }
                    else 
                    {
                        if (cms.checked)
                        {
                            if (Math.random() < ms.value/100)
                                ci.innerHTML += '-';
                        }
                        if (stopvalue-str.value > 0) 
                        {
                            ci.innerHTML += generatenuber(startvalue,stopvalue,maxdoublevalue);
                            if (count > k+1)
                                ci.innerHTML += spliter;
                        }
                        else
                            ci.innerHTML += stopvalue;
                    }
                }
            }
            if (cla.checked)
                ci.innerHTML += la.value;
        }
        
        function generatenuber(min,max,maxdouble)
        {
            min = Math.ceil(min);
            max = Math.floor(max);

            var g = (Math.random() * (max - min)) + min;
            g = Math.round(g);
            if (maxdouble != 0 && g != max)
            {   g = g+'.';
                for (i = 0; maxdouble > i; i++)
                g += ''+Math.floor(Math.random()*10);
            }
            return ''+g;
        }
        
        function copygen()
        {
            const elem = document.createElement('textarea');
            elem.value = ci.innerHTML;
            document.body.appendChild(elem);
            elem.select();
            document.execCommand('copy');
            document.body.removeChild(elem);
        }
    </script>
</html>
